# https://docs.aws.amazon.com/whitepapers/latest/aws-overview/introduction.html

"compute, storage, databases, analytics, networking, mobile, developer tools, management tools, IoT, security, and enterprise applications"

"From data warehousing to deployment tools, directories to content delivery, over 200 AWS services are available."

"In 2006, Amazon Web Services (AWS) began offering IT infrastructure services to businesses as web services—now commonly known as cloud computing."

Aside: Clarity of mind/thought, "cut through the bullshit".

"Using the AWS Well-Architected Tool, available at no charge in the AWS Management Console, you can review your workloads against these best practices by answering a set of questions for each pillar."

6 pillars:
- operational excellence
	- perform operations as code
	- make frequent, small, reversible changes
	- refine operations procedures
	- anticipate failure
	- learn from all operational failures
- security
	- implement a strong identify foundation
	- enable tracability
	- apply security at all layers, not just at the perimeter
	- automate security best practices
	- protect data in transit and at rest
	- keep people away from data
	- prepare for security events
- reliability
	- automatically recover from failure, like EC2 auto scaling
	- test recovery procedures
	- scale horizontally to increase aggregate workload availability
	- stop guessing capacity
	- manage change in automation
- performance efficiency
	- democratize advanced technologies
	- go global in minutes
	- use serverless architectures
	- experiment more often
	- consider mechanical sympathy
- cost optimization
	- implement cloud financial management
	- adopt a consumption model
	- measure overall efficiency
	- stop spending money on undifferentiated heavy lifting
	- analyze and attribute expenditure
- sustainability

"Cloud computing is the on-demand delivery of compute power, database, storage, applications, and other IT resources through a cloud services platform via the internet with pay-as-you-go pricing."

Six advantages of cloud computing:
- trade fixed expenses for variable expenses
- benefit from massive economies of scale
- stop guessing capacity
- increase speed and agility
- stop spending money running and maintaining data centers
- go global in minutes

Types of cloud computing:
- IaaS
- PaaS
- SaaS

"The AWS Cloud infrastructure is built around AWS Regions and Availability Zones. An AWS Region is a physical location in the world where we have multiple Availability Zones. Availability Zones consist of one or more discrete data centers, each with redundant power, networking, and connectivity, housed in separate facilities."

Benefits of AWS Security:
- Keep your data safe
- Meet compliance requirements
- Save money
- Scale quickly

Compliance:
- SOC 1/ISAE 3402, SOC 2, SOC 3
- FISMA, DIACAP, and FedRAMP
- PCI DSS Level 1
- ISO 9001, ISO 27001, ISO 27017, ISO 27018

	https://www.itgovernance.eu/blog/en/iso-27001-vs-soc-2-certification-whats-the-difference
	"One study suggests that the two frameworks share 96% of the same security controls. The difference is which of those security controls you implement."
		- ISO 27001 focuses on the development and maintenance of an (information security management system) ISMS, which is an overarching method of managing data protection practices.

		To achieve compliance, you must conduct a risk assessment, identify and implement security controls and regularly review their effectiveness.

		- SOC 2, by contrast, is a lot more flexible. It comprises five Trust Services Principles: Security, Availability, Processing Integrity, Confidentiality and Privacy, but only the first of those is mandatory.

		Organisations can implement internal controls related to the other principles if they want, but it’s not necessary to achieve certification.

	Both frameworks are recognised globally, but SOC 2 is more closely associated with North America.

	If you’re based in that region, you’ll find that both SOC 2 and ISO 27001 are common. Outside of North America, ISO 27001 is much more popular.

	You must complete an external audit to certify to either framework.

		The only difference in this process is who conducts the audit. A recognised ISO 27001-accredited certification body must complete ISO 27001 certification.

		In contrast, an SOC 2 attestation report can only be performed by a licensed CPA (Certified Public Accountant).


## SNS and SQS Deep Dive (And Lambda)

https://www.youtube.com/watch?v=LzFuXvhA5xk

SNS: Simple Notification Service.
- highly available
- durable
- secure
- pub-sub
- fully managed

	Advantages:
	- autoscaling
	- keep secure using AWS KMS keys
	- message filtering for different subscribers (based on fields)
	- fan-out, one message can be consumed by multiple consumers

SQS: Simple Queuing Service
- fully managed queuing service
- standard queue | FIFO queue (order guaranteed, limit 300/s, 3k/s with batching | exactly once processing)

	Advantages:
	- reliable
	- dead letter queue can be enabled
	- scales automatically
	- keeps messages secure using AWS KMS
	- can convert synchronous patterns to async
	- one message = one consumer, once processed it gets deleted (it is 'invisible' during processing)

Lambda:
- Two components, AWS Lambda Service + Your Lambda Function
- when Lambda service finds events, it calls the function
- batch size
- polling limit
- concurrency limits
- visibility timeout during processing (as with SQS)

- Partial failures in batch: all batch will be reverted
- A Lambda can decide to remove processed messages

## EventBridge vs SQS vs SNS

https://www.youtube.com/watch?v=8Vm5IiOT7GY&list=TLPQMjgwNzIwMjJgqK6dacKpbQ&index=2

Orka dialekten! :P

## https://aws.amazon.com/blogs/compute/choosing-between-messaging-services-for-serverless-applications/

Three of the most useful messaging patterns for serverless developers are queues, publish/subscribe, and event buses.

AWS, these are provided by Amazon SQS, Amazon SNS, and Amazon EventBridge respectively.

### https://softwareengineering.stackexchange.com/questions/437732/event-bus-vs-pubsub

For the "publisher/subscriber" pattern, subscriber components have to subscribe (or unsubscribe) to an event publisher. This means the life time of the event publishers is as least as long or longer than any of its subscribers. There are lots of simple scenarios where this is sufficient.

However, when you have a system where you have certain event publishers for a certain type of event, and you may also have subscribers for this type of event, and the life times of publishers and subscribers is completely independent from each other, you need a middle-man component to manage this. That middle-man is called an event-bus.

The event bus has a life time as long as your application or system runs. Subscribers subscribe to the certain type of event at that that bus, and publishers raise the events there.

So, an event bus fullfills a very similar purpose like an event queue, but it does not necessarily provide any FIFO guarantees. For the differences between the latter, I recommend this Stackoverflow question: Message Queue vs Message Bus -- what are the differences?.

### https://stackoverflow.com/questions/7793927/message-queue-vs-message-bus-what-are-the-differences

#### https://www.enterpriseintegrationpatterns.com/patterns/messaging/MessageBus.html



## https://hands-on.cloud/aws-step-functions-how-to-manage-long-running-tasks/

AWS Batch is used for running jobs that are pulled from the jobs FIFO queue, executed using containerized environment and exit upon completion. Job execution time is unlimited.

AWS Fargate is a general purpose container platform where you can do a bit more. For example, you can bind your containers to the network and launch them as a services. This service is a bit more complex, then AWS Batch. Job execution time is unlimited.

AWS Lambda is a service for short-running jobs with maximum execution time of 15 minutes.

AWS Serverless and other purpose built services for Machine Learning or Media Processing.



## https://serverfault.com/questions/951429/aws-fargate-service-scale-to-zero

If you want a truly serverless website with zero idle costs you’ll have to implement it using API.

- Put your frontend files (HTML, CSS, JS) in S3
- Load your dynamic content through API
- Implement the dynamic functionality in Lambda functions
- Use API gateway to call the Lambdas
- The DB can be Aurora Serverless or DynamoDB On-Demand

Update: if you still want to scale down the Fargate Service to 0 Tasks you can certainly do it through setting the Service's DesiredCount to 0. That can be done e.g. through aws-cli:

~ $ aws ecs update-service ... --service xyz --desired-count 0

